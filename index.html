<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adventura</title>
<style>
    body, html {
        height: 100%;
        margin: 0;
        font-family: system-ui, -apple-system, sans-serif;
    }
    
    /* Navigation styles */
    nav {
        display: flex;
        align-items: center;
        padding: 1rem 2rem;
        gap: 2rem;
    }
    
    .logo {
        font-weight: bold;
        font-size: 1.2rem;
    }
    
    .nav-links {
        display: flex;
        gap: 2rem;
    }

    .nav-links a {
        text-decoration: none;
        color: #333;
    }
    
    .search-container {
        margin-left: auto;
        display: flex;
        gap: 1rem;
    }
    
    .search-bar {
        background: #f5f5f5;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        width: 200px;
    }
    
    .auth-buttons button {
        padding: 0.5rem 1rem;
        border-radius: 50px;
        border: none;
        cursor: pointer;
    }
    
    .login {
        background: none;
    }
    
    .signup {
        background: #f47521;
        color: white;
    }

    /* Hero section styles */
    .background {
        background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),
                    url('mountain.webp');
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        min-height: 400px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        text-align: center;
        padding: 2rem 15%;
        border-radius: 1rem;
        margin: 2rem 0;
    }

    h1 {
        font-size: 2.8rem;
        color: white;
        margin-bottom: 1.5rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        width: 100%;
    }

    .search-box {
        background: white;
        border-radius: 50px;
        padding: 0.5rem;
        display: flex;
        width: 100%;
        max-width: 600px;
        margin: 0 auto 3rem auto;
    }

    .search-box input {
        flex: 1;
        border: none;
        padding: 0.5rem 1rem;
        outline: none;
    }

    .search-box button {
        background: #f47521;
        color: white;
        border: none;
        padding: 0.8rem 2rem;
        border-radius: 50px;
        cursor: pointer;
    }

    /* Preferences sections */
    .preferences-section {
        margin: 1rem 0;
        width: 100%;
        max-width: 600px;
        text-align: left;
        background: white;
        padding: 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .preferences-section h2 {
        color: #333;
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .preferences-options {
        display: flex;
        gap: 1rem;
    }

    .preference-button {
        position: relative;
        background: white;
        border: 1px solid #ddd;
        padding: 0.8rem 1.5rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .preference-button.selected {
        background: #f47521;
        color: white;
        border-color: #f47521;
    }

    .start-planning {
        background: #f47521;
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 50px;
        width: 100%;
        max-width: 600px;
        margin: 2rem 0;
        cursor: pointer;
        font-size: 1rem;
    }

    /* Add container styles */
    .container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 2rem;
    }

    /* Response container styles */
    .response-container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .plan-section {
        background: white;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        width: 100%;
    }

    .plan-section h2 {
        color: #333;
        margin-bottom: 1.5rem;
        font-size: 1.8rem;
        border-bottom: 2px solid #f47521;
        padding-bottom: 0.5rem;
    }

    .plan-section h3 {
        color: #f47521;
        margin: 1.5rem 0 1rem 0;
        font-size: 1.4rem;
    }

    .plan-section p {
        line-height: 1.6;
        color: #444;
        margin-bottom: 1rem;
    }

    .plan-section ul {
        list-style-type: none;
        padding: 0;
    }

    .plan-section li {
        padding: 1rem;
        border-bottom: 1px solid #eee;
        line-height: 1.6;
    }

    .plan-section li:last-child {
        border-bottom: none;
    }

    /* Plan sections */
    .plan-time-section {
        margin-bottom: 2rem;
    }

    .plan-time-section h2 {
        font-size: 1.8rem;
        color: #333;
        margin-bottom: 1rem;
    }

    .activities-container {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .activity-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 1rem;
        padding: 1rem;
        flex: 1 1 calc(30% - 1rem);
        box-sizing: border-box;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: left;
    }

    .activity-card h3 {
        margin-top: 0;
        color: #f47521;
    }

    .activity-card p {
        margin-bottom: 0;
        color: #555;
    }

    .activity-card:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .activity-card.selected {
        border-color: #f47521;
        background: #fff7f0;
    }

    .save-plan-button {
        background: #f47521;
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 50px;
        margin: 2rem 0;
        cursor: pointer;
        font-size: 1rem;
        display: block;
        width: 100%;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
    }

    /* Navigation responsive styles */
    @media (max-width: 768px) {
        nav {
            flex-direction: column;
            padding: 1rem;
            gap: 1rem;
        }

        .nav-links {
            display: none; /* Hide nav links on mobile */
        }

        .search-container {
            width: 100%;
            margin: 0;
            flex-direction: column;
            gap: 0.5rem;
        }

        .search-bar {
            width: 100%;
        }

        .auth-buttons {
            display: flex;
            gap: 0.5rem;
            width: 100%;
        }

        .auth-buttons button {
            flex: 1;
        }
    }

    /* Hero section responsive styles */
    @media (max-width: 768px) {
        .background {
            padding: 1.5rem;
            margin: 1rem;
            min-height: 300px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .search-box {
            flex-direction: column;
            padding: 0.5rem;
        }

        .search-box input {
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .preferences-section {
            padding: 1rem;
        }

        .preferences-options {
            flex-direction: column;
            gap: 0.5rem;
        }

        .preference-button {
            width: 100%;
            text-align: center;
        }
    }

    /* Activity cards responsive styles */
    @media (max-width: 768px) {
        .container {
            padding: 0 1rem;
        }

        .response-container {
            padding: 0 1rem;
        }

        .activities-container {
            flex-direction: column;
            gap: 0.5rem;
        }

        .activity-card {
            flex: 1 1 100%;
            margin-bottom: 0.5rem;
        }

        .plan-time-section h2 {
            font-size: 1.5rem;
        }

        .activity-card h3 {
            font-size: 1.2rem;
        }

        .save-plan-button {
            width: 100%;
            max-width: none;
            margin: 1rem 0;
        }
    }

    /* General responsive improvements */
    @media (max-width: 768px) {
        .plan-section {
            padding: 1rem;
        }

        .plan-section h2 {
            font-size: 1.5rem;
        }

        .plan-section h3 {
            font-size: 1.2rem;
        }

        .plan-section p {
            font-size: 0.9rem;
        }
    }

    /* Add smooth transitions for better UX */
    .activity-card, .preference-button, .search-box, .background {
        transition: all 0.3s ease;
    }

    /* Improve touch targets on mobile */
    @media (max-width: 768px) {
        button, 
        .activity-card,
        .preference-button {
            min-height: 44px; /* Minimum touch target size */
        }

        input {
            font-size: 16px; /* Prevent zoom on input focus in iOS */
        }
    }
</style>
</head>
<body>
    <nav>
        <div class="logo">üèîÔ∏è Adventura</div>
        <div class="nav-links">
            <a href="#">Explore</a>
            <a href="#">Travel Ideas</a>
            <a href="#">My Trips</a>
            <a href="#">Help</a>
        </div>
        <div class="search-container">
            <input type="text" placeholder="Search" class="search-bar">
            <div class="auth-buttons">
                <button class="login">Log in</button>
                <button class="signup">Sign up</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="background">
            <h1>Discover the world's best adventures</h1>
            <div class="search-box">
                <input type="text" id="destination-input" placeholder="Enter your destination...">
            </div>
            
            <div class="preferences-section">
                <h2>Set your travel preferences</h2>
                <div class="preferences-options" data-preference-group="budget">
                    <button class="preference-button" data-value="economy">Economy</button>
                    <button class="preference-button" data-value="moderate">Moderate</button>
                    <button class="preference-button" data-value="luxury">Luxury</button>
                </div>
            </div>
            
            <div class="preferences-section">
                <h2>Who are you traveling with?</h2>
                <div class="preferences-options" data-preference-group="traveler">
                    <button class="preference-button" data-value="adventurer">Adventurer</button>
                    <button class="preference-button" data-value="family">Family Traveler</button>
                    <button class="preference-button" data-value="budget">Budget Explorer</button>
                </div>
            </div>
            
            <button class="start-planning" id="start-planning-button">Start Planning</button>
        </div>
    </div>
    <div class="response-container" id="response-container"></div>
    <script>
        document.querySelectorAll('.preferences-options').forEach(group => {
            group.addEventListener('click', (e) => {
                if (!e.target.classList.contains('preference-button')) return;
                
                // Remove selected class from all buttons in this group
                group.querySelectorAll('.preference-button').forEach(button => {
                    button.classList.remove('selected');
                });
                
                // Add selected class to clicked button
                e.target.classList.add('selected');
            });
        });

        document.getElementById('start-planning-button').addEventListener('click', async () => {
            try {
                const destination = document.getElementById('destination-input').value;

                // Validate input
                if (!destination.trim()) {
                    alert('Please enter a destination');
                    return;
                }

                const preferences = {};
                document.querySelectorAll('.preferences-options').forEach(group => {
                    const selectedButton = group.querySelector('.preference-button.selected');
                    if (selectedButton) {
                        const groupName = group.dataset.preferenceGroup;
                        const selectedValue = selectedButton.dataset.value;
                        preferences[groupName] = selectedValue;
                    }
                });

                // Validate preferences
                if (!preferences.budget || !preferences.traveler) {
                    alert('Please select all preferences');
                    return;
                }

                const response = await fetch('https://adventura-70fm.onrender.com/plan-trip', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ destination, preferences })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                const plan = result.plan;
                const responseContainer = document.getElementById('response-container');

                // Clear previous content
                responseContainer.innerHTML = '';

                // Function to create a plan section
                function createPlanSection(timeOfDay, activities) {
                    const section = document.createElement('div');
                    section.classList.add('plan-time-section');

                    const heading = document.createElement('h2');
                    heading.textContent = `Plans for the ${timeOfDay.charAt(0).toUpperCase() + timeOfDay.slice(1)}`;
                    section.appendChild(heading);

                    const activitiesContainer = document.createElement('div');
                    activitiesContainer.classList.add('activities-container');

                    activities.forEach((activity, index) => {
                        const activityCard = document.createElement('div');
                        activityCard.classList.add('activity-card');
                        activityCard.setAttribute('data-time', timeOfDay);
                        activityCard.setAttribute('data-index', index);

                        activityCard.innerHTML = `
                            <h3>${activity.title}</h3>
                            <p>${activity.description}</p>
                        `;

                        // Add click event to select/deselect
                        activityCard.addEventListener('click', () => {
                            activityCard.classList.toggle('selected');
                        });

                        activitiesContainer.appendChild(activityCard);
                    });

                    section.appendChild(activitiesContainer);
                    responseContainer.appendChild(section);
                }

                // Create sections for morning, afternoon, and evening
                createPlanSection('morning', plan.morning);
                createPlanSection('afternoon', plan.afternoon);
                createPlanSection('evening', plan.evening);

                // Optionally, add a "Save Plan" button
                const saveButton = document.createElement('button');
                saveButton.textContent = 'Save Your Plan';
                saveButton.classList.add('save-plan-button');
                saveButton.addEventListener('click', () => {
                    // Collect selected activities
                    const selectedActivities = [];
                    document.querySelectorAll('.activity-card.selected').forEach(card => {
                        const time = card.getAttribute('data-time');
                        const index = card.getAttribute('data-index');
                        const activity = plan[time][index];
                        selectedActivities.push({ time, activity });
                    });

                    // Display or process the selected activities
                    console.log('Selected Activities:', selectedActivities);
                    alert('Your plan has been saved! Check the console for details.');
                });

                responseContainer.appendChild(saveButton);

            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong. Please try again later.');
            }
        });
    </script>
</body>
</html>